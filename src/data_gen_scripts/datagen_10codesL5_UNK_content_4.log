Namespace(ICDcodelength=5, data='/Users/lauragraesser/Documents/NYU_Courses/medical_data', generatesplits=0, mapunk=0, notescontent=4, notesfile='notes_example.csv', notestypes='discharge summary', numlabels=10, preprocessing='add space,remove brackets,replace numbers,replace break', procdatafile='10codesL5_UNK_content_4', vocabcountthreshold=5)

Note types included: ['discharge summary']
Total number of HADM_ID: 58976

Example: raw data
{'labels': {'icd': ['41401', '4111', '48283', '2859', '2720', '3051'], 'seq_no': ['1', '2', '3', '4', '5', '6']}, 'pat_id': '114'}

Length train: 47243 valid: 5940 test: 5793
Top diagnoses: ['4019', '4280', '42731', '41401', '5849', '25000', '2724', '51881', '5990', '53081']

Example after processing ICD codes
{'labels': {'icd': ['41401'], 'seq_no': ['1']}, 'pat_id': '114'}

Total number of HADM_ID after ICD processing: 41796

Example after removing blanks
{'labels': {'icd': ['41401'], 'seq_no': ['1']}, 'pat_id': '114'}

Number of HADM ID with notes added: 30048
Data stats after loading data
No. of data points: 41796
Data points with no notes: 13152
Average No. of notes per Hadm_id: 0.718920470858
30048 notes, 30048 discharge notes, ratio: 100.0
Average length of note (chars): 7534.24
{'Discharge summary': 30048}

EXAMPLE NOTE PROCESSING...
Original note
{'note_type': 'Discharge summary', 'description': 'Report', 'note': "Admission Date: [**2140-12-12**]        Discharge Date: [**2140-12-27**]\n\nDate of Birth:  [**2105-2-9**]        Sex:  M\n\nService:\n\n\nHISTORY OF PRESENT ILLNESS:  The patient is a 35 year old\ngentleman who woke up with severe headache, woke up with a\n[**11-20**] frontal headache that was constant.  Took Advil and\nTylenol without relief.  Headache persisted.  He went to an\noutside hospital, where an MRI of the brain showed\nhydrocephalus and a cystic mass around the pineal gland.  The\npatient was transferred to [**First Name4 (NamePattern1) 3867**] [**Last Name (NamePattern1) **] [**First Name (Titles) **]\n[**Last Name (Titles) **] for further management.\n\nPAST SURGICAL HISTORY:  Gastric wrap.\n\nPAST MEDICAL HISTORY:  No other medical history.\n\nPHYSICAL EXAMINATION:  Heart rate 84, blood pressure 133/78,\nrespiratory rate 12, oxygen saturation 97 percent in room\nair.  The patient is lying in bed with his eyes covered.  He\nis alert and oriented times three.  Pupils equal, round and\nreactive to light, extraocular movements full with positive\nphotophobia and neck stiffness.  Cardiovascular:  Regular\nrate and rhythm.  Lungs:  Clear to auscultation bilaterally.\nAbdomen: Soft, nontender, nondistended.  Extremities:  No\nperipheral edema.  Neurologic examination: Cranial nerves II\nthrough XII intact; strength 5/5 in all muscle groups.\n\nHOSPITAL COURSE:  The patient was admitted to the Intensive\nCare Unit for close neurologic observation.  He had a vent\ndrain placed on [**2140-12-13**] due to hydrocephalus.  On\n[**2140-12-14**], the patient was taken to the operating room\nand had transcallosal resection of a third ventricle tumor\nand continued with his vent drain in placed.  The patient was\nmonitored in the PACU overnight, where he remained\nneurologically stable.\n\nOn [**2140-12-16**], the patient was monitored on the Step-\nDown Unit.  He was awake, alert and oriented.  Speech was\nfluent.  The patient complained of double vision on lateral\ngaze.  His strength was [**6-15**] in all muscle groups.  His\ndressing was clean, dry and intact.  The patient had an MRI\nof his entire spine that showed no evidence of metastatic\ndisease.  The patient continued to have his vent drain in\nplace.  Postoperatively, neurologically, the patient was\nawake, alert and oriented times two, having difficulty with\nshort term memory postoperatively.\n\nOn [**2140-12-19**], the drain was raised to 15 cm above the\ntragus.  The patient continued to have difficulty with short\nterm memory but was otherwise intact neurologically.  On\n[**2140-12-20**], the patient's drain was raised to 20 cm\nabove the tragus.  The patient continued to remain\nneurologically stable.  His Decadron was weaned down to 3 mg\ntwice a day.\n\nOn [**2140-12-24**], pathology of the mass that was removed\nwas consistent with ependymoma.  The patient's drain was\nraised to 25 cm above the tragus.  The patient remained\nneurologically stable and was out of bed to chair.  On\n[**2140-12-25**], the drain was clamped.  The patient\nremained neurologically stable.  On [**2140-12-26**], the\npatient had a head CT scan done, which showed no change in\nthe size of his ventricles.  The drain was removed on\n[**2140-12-26**] and the patient remained neurologically\nstable.\n\nDISPOSITION:  The patient was discharged to home [**2140-12-27**].  Follow-up in the Brain [**Hospital 341**] Clinic in one week for\nstaple removal.  The patient's condition was stable at the\ntime of discharge.  Discharge medications included Percocet\none to two tablets po every four hours as needed, Decadron 2\nmg po every 12 hours, pantoprazole 40 mg po once daily.  His\ncondition was stable at the time of discharge.\n\n\n\n                        [**First Name11 (Name Pattern1) **] [**Last Name (NamePattern4) **], [**MD Number(1) 8632**]\n\nDictated By:[**Last Name (NamePattern1) **]\nMEDQUIST36\nD:  [**2141-4-25**] 11:00:30\nT:  [**2141-4-25**] 12:02:45\nJob#:  [**Job Number 34147**]\n", 'date': '2140-12-27'}

Note after text selection
history of present illness:  the patient is a 35 year old
gentleman who woke up with severe headache, woke up with a
[**11-20**] frontal headache that was constant.  took advil and
tylenol without relief.  headache persisted.  he went to an
outside hospital, where an mri of the brain showed
hydrocephalus and a cystic mass around the pineal gland.  the
patient was transferred to [**first name4 (namepattern1) 3867**] [**last name (namepattern1) **] [**first name (titles) **]
[**last name (titles) **] for further management.

past surgical history:  gastric wrap.



Note after text processing
history of present illness : the patient is a dd year old gentleman who woke up with severe headache , woke up with a frontal headache that was constant . took advil and tylenol without relief . headache persisted . he went to an outside hospital , where an mri of the brain showed hydrocephalus and a cystic mass around the pineal gland . the patient was transferred to  for further management . past surgical history : gastric wrap . 

No. of data points: 41796
Data points with no notes: 13152
Average No. of notes per Hadm_id: 0.718920470858
30048 notes, 30048 discharge notes, ratio: 100.0
Average length of note (chars): 1602.46
{'Discharge summary': 30048}

FINAL NUMBER OF DATAPOINTS: 28021
EXAMPLES
['109976', 'history of present illness : the patient is a dd year old gentleman who woke up with severe headache , woke up with a frontal headache that was constant . took advil and tylenol without relief . headache persisted . he went to an outside hospital , where an mri of the brain showed hydrocephalus and a cystic mass around the pineal gland . the patient was transferred to  for further management . past surgical history : gastric wrap . ', '53081']

['178393', 'history of present illness : this is a dd-year-old man in generally good health with a new onset of dyspnea on exertion and angina who underwent a cardiac catheterization on which revealed two vessel coronary artery disease with an ejection fraction of dd% . there was disease in the proximal lad with a stenosis at dd of dd% and dd% osteal dd lesion , dd% distal rca lesion with occluded pda , mild pvb disease and collaterals left to right . given these findings , he was referred to dr . for coronary artery bypass grafting . discharge diagnosis : d . hypercholesterolemia . d . coronary artery disease , status post cabg times three performed on medquistdd d : dd : dd t : dd : dd job# : ', '41401']

Length of split data: train: 22393, valid: 2850, test: 2778
Tokenized 0 notes
Tokenized 5000 notes
Tokenized 10000 notes
Tokenized 15000 notes
Tokenized 20000 notes
Time for python tokenization on training data: 7.401
Tokenized 0 notes
Tokenized 0 notes
EXAMPLES AFTER TOKENIZATION
8
['178393', [['history', 'of', 'present', 'illness', ':', 'this', 'is', 'a', 'dd-year-old', 'man', 'in', 'generally', 'good', 'health', 'with', 'a', 'new', 'onset', 'of', 'dyspnea', 'on', 'exertion', 'and', 'angina', 'who', 'underwent', 'a', 'cardiac', 'catheterization', 'on', 'which', 'revealed', 'two', 'vessel', 'coronary', 'artery', 'disease', 'with', 'an', 'ejection', 'fraction', 'of', 'dd%'], ['there', 'was', 'disease', 'in', 'the', 'proximal', 'lad', 'with', 'a', 'stenosis', 'at', 'dd', 'of', 'dd%', 'and', 'dd%', 'osteal', 'dd', 'lesion', ',', 'dd%', 'distal', 'rca', 'lesion', 'with', 'occluded', 'pda', ',', 'mild', 'pvb', 'disease', 'and', 'collaterals', 'left', 'to', 'right'], ['given', 'these', 'findings', ',', 'he', 'was', 'referred', 'to', 'dr'], ['for', 'coronary', 'artery', 'bypass', 'grafting'], ['discharge', 'diagnosis', ':', 'd'], ['hypercholesterolemia'], ['d'], ['coronary', 'artery', 'disease', ',', 'status', 'post', 'cabg', 'times', 'three', 'performed', 'on', 'medquistdd', 'd', ':', 'dd', ':', 'dd', 't', ':', 'dd', ':', 'dd', 'job#', ':']], '41401']

6
['167887', [['history', 'of', 'present', 'illness', ':', 'this', 'is', 'an', 'dd-year-old', 'male', 'who', 'reports', 'episodes', 'of', 'severe', 'fatigue', 'in', 'that', 'resolved', 'spontaneously'], ['diagnosed', 'with', 'cardiomyopathy', 'and', 'mitral', 'insufficiency'], ['he', 'also', 'reports', 'an', 'episode', 'of', 'chest', 'pressure', 'earlier', 'in', 'that', 'resolved', 'with', 'rest', ',', 'with', 'a', 'recent', 'increase', 'in', 'episodes', 'of', 'fatigue', 'recently'], ['therefore', ',', 'referred', 'for', 'cardiac', 'catheterization', 'in'], ['cardiac', 'catheterization', 'revealed', 'an', 'ejection', 'fraction', 'of', 'dd', 'percent', ',', 'a', 'ddd', 'percent', 'rca', 'occlusion', ',', 'a', 'ddd', 'percent', 'om', 'occlusion', ',', 'a', 'dd', 'percent', 'ramus', 'occlusion', ',', 'a', 'dd', 'percent', 'lad', 'occlusion', ',', 'an', 'dd', 'percent', 'first', 'diagonal', 'occlusion', ',', 'with', 'd', 'plus', 'mitral', 'regurgitation', ';', 'for', 'which', 'he', 'was', 'referred', 'for', 'evaluation', 'for', 'coronary', 'artery', 'bypass', 'grafting', 'and', 'mitral', 'valve', 'repair', 'or', 'replacement'], ['']], '41401 4019 53081']

Total tokens: 80000, Size of vocabulary: 17735
Top 100 words...
[',', ':', 'and', 'to', 'the', 'of', 'd', 'was', 'with', 'a', 'dd', 'for', 'in', '?', 'you', 'on', 'your', 'he', 'or', 'discharge', 'she', 'at', 'pain', 'is', 'patient', '', 'no', 'as', 'were', 'had', 'please', 'history', 'have', 'instructions', 'that', 'his', 'this', 'an', 'her', 'ddd', 'not', 'be', 'mg', 'from', 'any', 'by', 'has', 'chest', 'present', 'blood', 'diagnosis', '-', 'illness', 'call', 'dr', 'which', 'left', 'up', 'daily', 'but', 'also', 'condition', 'will', 'medications', 'if', 'day', 'one', 'after', 'status', 'right', 'followup', 'weeks', 'given', 'take', 'pt', 'tablet', 'disease', 'been', 'care', 'ed', 'when', 'started', 'hospital', 'appointment', 'follow', 's/p', 'denies', 'po', 'who', 'showed', 'admitted', 'dd%', 'heart', 'are', 'it', 'cardiac', 'days', 'primary', 'found', 'breath']

Vocabifying training data...
Mapping unknown words to 'UNK'
Vocabified 0 notes
Vocabified 1000 notes
Vocabified 2000 notes
Vocabified 3000 notes
Vocabified 4000 notes
Vocabified 5000 notes
Vocabified 6000 notes
Vocabified 7000 notes
Vocabified 8000 notes
Vocabified 9000 notes
Vocabified 10000 notes
Vocabified 11000 notes
Vocabified 12000 notes
Vocabified 13000 notes
Vocabified 14000 notes
Vocabified 15000 notes
Vocabified 16000 notes
Vocabified 17000 notes
Vocabified 18000 notes
Vocabified 19000 notes
Vocabified 20000 notes
Vocabified 21000 notes
Vocabified 22000 notes
Total unknown words: 97330, unk per note: 4.34644755057384
Vocabifying valid data...
Mapping unknown words to 'UNK'
Vocabified 0 notes
Vocabified 1000 notes
Vocabified 2000 notes
Total unknown words: 13187, unk per note: 4.627017543859649
Vocabifying test data...
Mapping unknown words to 'UNK'
Vocabified 0 notes
Vocabified 1000 notes
Vocabified 2000 notes
Total unknown words: 13123, unk per note: 4.723902087832974
EXAMPLES AFTER VOCAB EXTRACTION AND DATA PREP
8
['178393', [['history', 'of', 'present', 'illness', ':', 'this', 'is', 'a', 'dd-year-old', 'man', 'in', 'generally', 'good', 'health', 'with', 'a', 'new', 'onset', 'of', 'dyspnea', 'on', 'exertion', 'and', 'angina', 'who', 'underwent', 'a', 'cardiac', 'catheterization', 'on', 'which', 'revealed', 'two', 'vessel', 'coronary', 'artery', 'disease', 'with', 'an', 'ejection', 'fraction', 'of', 'dd%'], ['there', 'was', 'disease', 'in', 'the', 'proximal', 'lad', 'with', 'a', 'stenosis', 'at', 'dd', 'of', 'dd%', 'and', 'dd%', 'osteal', 'dd', 'lesion', ',', 'dd%', 'distal', 'rca', 'lesion', 'with', 'occluded', 'pda', ',', 'mild', 'UNK', 'disease', 'and', 'collaterals', 'left', 'to', 'right'], ['given', 'these', 'findings', ',', 'he', 'was', 'referred', 'to', 'dr'], ['for', 'coronary', 'artery', 'bypass', 'grafting'], ['discharge', 'diagnosis', ':', 'd'], ['hypercholesterolemia'], ['d'], ['coronary', 'artery', 'disease', ',', 'status', 'post', 'cabg', 'times', 'three', 'performed', 'on', 'medquistdd', 'd', ':', 'dd', ':', 'dd', 't', ':', 'dd', ':', 'dd', 'job#', ':']], '41401']

6
['167887', [['history', 'of', 'present', 'illness', ':', 'this', 'is', 'an', 'dd-year-old', 'male', 'who', 'reports', 'episodes', 'of', 'severe', 'fatigue', 'in', 'that', 'resolved', 'spontaneously'], ['diagnosed', 'with', 'cardiomyopathy', 'and', 'mitral', 'insufficiency'], ['he', 'also', 'reports', 'an', 'episode', 'of', 'chest', 'pressure', 'earlier', 'in', 'that', 'resolved', 'with', 'rest', ',', 'with', 'a', 'recent', 'increase', 'in', 'episodes', 'of', 'fatigue', 'recently'], ['therefore', ',', 'referred', 'for', 'cardiac', 'catheterization', 'in'], ['cardiac', 'catheterization', 'revealed', 'an', 'ejection', 'fraction', 'of', 'dd', 'percent', ',', 'a', 'ddd', 'percent', 'rca', 'occlusion', ',', 'a', 'ddd', 'percent', 'om', 'occlusion', ',', 'a', 'dd', 'percent', 'ramus', 'occlusion', ',', 'a', 'dd', 'percent', 'lad', 'occlusion', ',', 'an', 'dd', 'percent', 'first', 'diagonal', 'occlusion', ',', 'with', 'd', 'plus', 'mitral', 'regurgitation', ';', 'for', 'which', 'he', 'was', 'referred', 'for', 'evaluation', 'for', 'coronary', 'artery', 'bypass', 'grafting', 'and', 'mitral', 'valve', 'repair', 'or', 'replacement'], ['']], '41401 4019 53081']

Written data to file
Total time to process data 494.71
